function addMedia(e,t){let n=document.getElementById(mc[t].target),l=document.getElementById(mc[t].img_leg),m=document.getElementById(mc[t].cut_type),i=document.getElementById(mc[t].ac),a=document.getElementById(mc[t].file),s=document.getElementsByName("_token")[0].value,c=document.createElement("form");c.setAttribute("enctype","multipart/form-data");let d=new FormData(c);d.append("file",a.files[0],Blob),d.append("name_img",l.value),d.append("cut_type",m.value),d.append("width",mc[t].width),d.append("height",mc[t].height);let r=new XMLHttpRequest;cleanMsgs(),r.onreadystatechange=function(){if(4==this.readyState&&200==this.status){let l=JSON.parse(this.responseText);l.status?(e.parentElement.appendChild(createItem("div","msg-success",l.status)),n.value=l.public_path+"/"+l.filename,document.getElementById(mc[t].img_preview).setAttribute("src","/file/"+l.filename),e.parentElement.parentElement.style.display="none",document.getElementById("preview_img_on_up_"+mc[t].prefix).setAttribute("src","/file/"+l.filename),mc[t].debug&&console.log(l)):e.parentElement.appendChild(createItem("div","msg-error",l[0].file[0]))}},r.open("POST",i.value,!0),r.setRequestHeader("X-CSRF-Token",s),r.send(d)}function selectType(e,t){e.parentElement.classList.add("selected"),e.parentElement.previousElementSibling&&e.parentElement.previousElementSibling.classList.remove("selected"),e.parentElement.nextElementSibling&&e.parentElement.nextElementSibling.classList.remove("selected"),e.parentElement.parentElement.lastElementChild.value=t}function selectFile(e){e.previousElementSibling.click()}function selectedFile(e,t,n){addMedia(e,t,n)}function cleanMsgs(){let e=document.getElementsByClassName("msg-success"),t=document.getElementsByClassName("msg-error");if(e.length>0)for(i=0;i<e.length;i++)e[i].remove();if(t.length>0)for(i=0;i<t.length;i++)t[i].remove()}function createItem(e,t,n){let l=document.createElement(e);return l.classList.add(t),l.appendChild(document.createTextNode(n)),l}